#version {{ VERSION }}

{{ LOCATION 0 BINDING 0 RATE_VERTEX OFFSET TIGHTLY_PACKED }} in vec3 a_pos;
{{ LOCATION 1 BINDING 0 RATE_VERTEX OFFSET TIGHTLY_PACKED }} in vec3 a_normal;
{{ LOCATION 2 BINDING 0 RATE_VERTEX OFFSET TIGHTLY_PACKED }} in vec2 a_uv;

{{ LOCATION 0 }} out vec3 norm;
{{ LOCATION 1 }} out vec2 uv;
{{ LOCATION 2 }} out vec3 frag_pos;

{{ SET_BINDING 0 0 BUFFER_LABEL GLOBAL }} uniform CubeModel {
    mat4 model;
} cube_transform;

{{ SET_BINDING 0 2 BUFFER_LABEL GLOBAL }} uniform CameraVP {
    mat4 vp;
} camera_vp[2];


void main(){
    norm = mat3(transpose(inverse(cube_transform.model))) * a_normal;
    uv = a_uv;
    frag_pos = vec3(cube_transform.model * vec4(a_pos, 1.0));
    gl_Position = camera_vp[0].vp * vec4(frag_pos, 1.0);
}
