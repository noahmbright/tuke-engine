#version {{ VERSION }}

{{ LOCATION 0 BINDING 0 RATE_VERTEX OFFSET TIGHTLY_PACKED }} in vec3 a_pos;
{{ LOCATION 1 BINDING 0 RATE_VERTEX OFFSET TIGHTLY_PACKED }} in vec2 a_uv;

{{ LOCATION 0 }} out vec2 uv;

{{ SET_BINDING 0 0 BUFFER_LABEL PONG_GLOBAL }} uniform VPUniform {
    mat4 vp;
} vp;

{{ SET_BINDING 1 0 BUFFER_LABEL PONG_GLOBAL }} uniform InstanceDataUBO {
    mat4 model[3];
} instance_data;

void main(){
    uv = a_uv;
    mat4 model = instance_data.model[gl_InstanceIndex];
    gl_Position = vp.vp * model * vec4(a_pos, 1.0);
}
